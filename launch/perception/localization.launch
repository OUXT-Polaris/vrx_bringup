<?xml version="1.0"?>
<launch>
    <!-- args -->
    <arg name="world_frame" default="earth"/>
    <arg name="map_frame" default="map"/>
    
    <!-- Particle Filter Localizer -->
    <include file="$(find pf_localization)/launch/pf_localization.launch">
    </include>

    <node pkg="vrx_bringup" type="initial_pose_setter.py" name="initial_pose_setter" output="log" respawn="false" respawn_delay="0">
        <rosparam file="$(find vrx_bringup)/config/initial_pose_setter.yaml" command="load"/>
    </node>

    <!-- Geographic Conversion -->
    <node pkg="geographic_conversion" type="fix_converter_node" name="fix_converter_node" output="screen" respawn="true" respawn_delay="0">
        <param name="input_topic" value="/gps/fix"/>
        <param name="map_frame" value="$(arg map_frame)"/>
    </node>

    <node pkg="geographic_conversion" type="geopath_converter_node" name="geopath_converter_node" output="screen" respawn="true" respawn_delay="0">
        <param name="map_frame" value="$(arg map_frame)"/>
    </node>

    <!-- World to Map Frame -->
    <node pkg="tf2_ros" type="static_transform_publisher" name="world_to_map" args="0 0 0 0 0 0 0 $(arg world_frame) $(arg map_frame)" />
</launch>